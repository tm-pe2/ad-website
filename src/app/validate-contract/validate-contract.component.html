<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;400;600&family=Roboto:wght@100;300;400;500&display=swap" rel="stylesheet">
<div class="row"> 
    <div class="col-md-12 col-md-offset-3">
        <!-- 1st Form : Service-->
        <form [formGroup]="meterTypeForm" id="forms">
            <ul id="progressbar">
                <li [ngClass]="step>=1 ? 'active ' : 'inactive'">Service</li>
                <li [ngClass]="step>=2 ? 'active' : 'inactive'">Family Compound</li>
                <li [ngClass]="step>=3 ? 'active' : 'inactive'">Meter</li>
                <li [ngClass]="step==4 ? 'active' : 'inactive'">Consumption</li>
            </ul>
            <fieldset  *ngIf="step == 1" >
                <h2 class="form-header">Meter</h2>
                <label for="metersNumber">Enter the validated meter readings:</label>
                <br>
                <mat-form-field name="metersNumber" appearance="fill" ngDefaultControl  class="flex place-content-evenly">
                    <mat-select formControlName="metersNumber" [(value)]="selectedMeterNr">
                        <mat-option value="1">1 meter</mat-option>
                        <mat-option value="2">2 meters</mat-option>
                        <mat-option value="3" >3 meters</mat-option>
                      </mat-select>
                </mat-form-field>
                <br>
                <div *ngIf="meterType_step && meterTypeForm.controls['metersNumber'].errors">
                    <div class="required" *ngIf="meterType['metersNumber'].errors?.['required']">*Number of meters is required</div>
                </div>
                <br>
                <mat-radio-group *ngIf="selectedMeterNr==1; else elseBlock;" formControlName="meterTypes" class="block">
                    <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes'].errors }" value="manualMeter" class="block px-3.5">Manual Meter</mat-radio-button>
                    <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes'].errors }" value="smartMeter" class="block px-3.5">Smart Meter</mat-radio-button>
                    <br>
                    <div *ngIf="meterType_step && meterTypeForm.controls['meterTypes'].errors">
                        <div class="required" *ngIf="meterType['meterTypes'].errors?.['required']">*Meter Type is required</div>
                    </div>
                    <br>
                    <mat-form-field name="metersValue">
                        <mat-label>Meter value:</mat-label>
                        <input matInput formControlName="metersValue">
                    </mat-form-field>
                    <br>
                    <div *ngIf="meterType_step && meterTypeForm.controls['metersValue'].errors">
                        <div class="required" *ngIf="meterType['metersValue'].errors?.['required']">*Meter value is required</div>
                    </div>
                </mat-radio-group>

                <ng-template  #elseBlock class="flex place-content-evenly">
                    <div *ngIf="selectedMeterNr==2; else elseBlock2;" class="flex place-content-evenly">
                        <mat-radio-group  formControlName="meterTypes" class="flex place-content-evenly">
                            <div>
                                <div><h3><strong><strong>Meter no.1</strong></strong></h3></div>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes'].errors }" value="manualMeter" class="block px-3.5">Manual Meter</mat-radio-button>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes'].errors }" value="smartMeter" class="block px-3.5">Smart Meter</mat-radio-button>
                                <br>
                                <div *ngIf="meterType_step && meterTypeForm.controls['meterTypes'].errors">
                                    <div class="required" *ngIf="meterType['meterTypes'].errors?.['required']">*Meter Type is required</div>
                                </div>
                                <br>
                                <mat-form-field name="metersValue">
                                    <mat-label>Meter no.1 value:</mat-label>
                                    <input matInput formControlName="metersValue">
                                </mat-form-field>
                                <br>            
                                <div *ngIf="meterType_step && meterTypeForm.controls['metersValue'].errors">
                                    <div class="required" *ngIf="meterType['metersValue'].errors?.['required']">*Meter value is required</div>
                                </div>
                            </div>
                        </mat-radio-group>
                        <mat-radio-group formControlName="meterTypes2" class="flex place-content-evenly">
                            <div>
                                <div><h3><strong>Meter no.2</strong></h3></div>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes2'].errors }" value="manualMeter" class="block px-3.5">Manual Meter</mat-radio-button>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes2'].errors }" value="smartMeter" class="block px-3.5">Smart Meter</mat-radio-button>
                                <br>
                                <div *ngIf="meterType_step && meterTypeForm.controls['meterTypes2'].errors">
                                    <div class="required" *ngIf="meterType['meterTypes2'].errors?.['required']">*Meter Type is required</div>
                                </div>
                                <br>
                                <mat-form-field name="metersValue2">
                                    <mat-label>Meter no.2 value:</mat-label>
                                    <input matInput formControlName="metersValue2">
                                </mat-form-field>
                                <br>            
                                <div *ngIf="meterType_step && meterTypeForm.controls['metersValue2'].errors">
                                    <div class="required" *ngIf="meterType['metersValue2'].errors?.['required']">*Meter value is required</div>
                                </div>
                            </div>
                        </mat-radio-group>
                    </div>
                </ng-template>

                <ng-template #elseBlock2 class="flex place-content-evenly">
                    <div class="flex place-content-evenly">
                        <mat-radio-group formControlName="meterTypes" class="flex place-content-evenly">
                            <div>
                                <div><h3><strong>Meter no.1</strong></h3></div>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes'].errors }" value="manualMeter" class="block px-3.5">Manual Meter</mat-radio-button>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes'].errors }" value="smartMeter" class="block px-3.5">Smart Meter</mat-radio-button>
                                <br>
                                <div *ngIf="meterType_step && meterTypeForm.controls['meterTypes'].errors">
                                    <div class="required" *ngIf="meterType['meterTypes'].errors?.['required']">*Meter Type is required</div>
                                </div>
                                <br>
                                <mat-form-field name="metersValue">
                                    <mat-label>Meter no.1 value:</mat-label>
                                    <input matInput formControlName="metersValue" [value]="metersValueVal">
                                </mat-form-field>
                                <br>            
                                <div *ngIf="meterType_step && meterTypeForm.controls['metersValue'].errors">
                                    <div class="required" *ngIf="meterType['metersValue'].errors?.['required']">*Meter value is required</div>
                                </div>
                            </div>
                        </mat-radio-group>
                        <mat-radio-group formControlName="meterTypes2" class="flex place-content-evenly">
                            <div>
                                <div><h3><strong>Meter no.2</strong></h3></div>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes2'].errors }" value="manualMeter" class="block px-3.5">Manual Meter</mat-radio-button>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes2'].errors }" value="smartMeter" class="block px-3.5">Smart Meter</mat-radio-button>
                                <br>
                                <div *ngIf="meterType_step && meterTypeForm.controls['meterTypes2'].errors">
                                    <div class="required" *ngIf="meterType['meterTypes2'].errors?.['required']">*Meter Type is required</div>
                                </div>
                                <br>
                                <mat-form-field name="metersValue2">
                                    <mat-label>Meter no.2 value:</mat-label>
                                    <input matInput formControlName="metersValue2">
                                </mat-form-field>
                                <br>            
                                <div *ngIf="meterType_step && meterTypeForm.controls['metersValue2'].errors">
                                    <div class="required" *ngIf="meterType['metersValue2'].errors?.['required']">*Meter value is required</div>
                                </div>
                            </div>
                        </mat-radio-group>
                        <mat-radio-group formControlName="meterTypes3" class="flex place-content-evenly">
                            <div>
                                <div><h3><strong>Meter no.3</strong></h3></div>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes3'].errors }" value="manualMeter" class="block px-3.5">Manual Meter</mat-radio-button>
                                <mat-radio-button [ngClass]="{ 'is-invalid': meterType_step && meterType['meterTypes3'].errors }" value="smartMeter" class="block px-3.5">Smart Meter</mat-radio-button>
                                <br>
                                <div *ngIf="meterType_step && meterTypeForm.controls['meterTypes3'].errors">
                                    <div class="required" *ngIf="meterType['meterTypes3'].errors?.['required']">*Meter Type is required</div>
                                </div>
                                <br>
                                <mat-form-field name="metersValue3">
                                    <mat-label>Meter no.3 value:</mat-label>
                                    <input matInput formControlName="metersValue3">
                                </mat-form-field>
                                <br>            
                                <div *ngIf="meterType_step && meterTypeForm.controls['metersValue3'].errors">
                                    <div class="required" *ngIf="meterType['metersValue3'].errors?.['required']">*Meter value is required</div>
                                </div>
                            </div>
                        </mat-radio-group>   
                    </div>                 
                </ng-template>

               
                <br>
                <input (click)="previous()" type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                <input  (click)="next()" type="button" name="next" class="next action-button" value="Next"/>
        
            
            </fieldset>
        </form>
        <!--4th Form : Consumption -->
        
                <input (click)="previous()" type="button" name="previous" class="previous action-button-previous" value="Previous"/>
                <input (click)="submit()"type="submit" name="submit" class="submit action-button" value="Submit"/>
            
    </div>
</div>